<filters-v2>
    <div class="row">
        <div class="col-md-6">
            <div class="panel-group">
                <div class="panel panel-primary">
                    <div class="panel-heading" id="headingTCR">
                        <h3 class="panel-title">
                            <a role="button" data-toggle="collapse" href="#collapse-TCR">
                                TCR
                            </a>
                        </h3>
                    </div>
                    <filters-tcr id="collapse-TCR" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        General
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="<p>Search for specified parent species of a TCR and receptor chain (alpha or beta)</p>"
                                              class="glyphicon glyphicon-question-sign">
                                        </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-2">
                                            <p class="vcenter">Species</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="general_tcr.human">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Human
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="general_tcr.monkey">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Monkey
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="general_tcr.mouse">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Mouse
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-xs-2">
                                            <p class="vcenter">Gene (chain)</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="general_tcr.tra">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    TRA
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="general_tcr.trb">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    TRB
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        Germline sequence
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="</p>Specify Variable (V) and Joining (J) segment filters.</p><p>Click on the text field to see the list of known V/J segment IDs, start typing to narrow the list. Multiple IDs can be selected by separating them with a comma.</p><p>Incomplete queries will be treated as substrings. For example 'TRBV7' will match 'TRBV7-2*01, TRBV7-2*02, ... and TRBV7-9*01, TRBV7-9*02, ...', 'TRBV7-2' will match 'TRBV7-2*01, TRBV7-2*02, ...', etc.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                        </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Variable segment(s)</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of V segments, start typing to see suggestions..."
                                                       ng-model="v_segment.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in v_segment.autocomplete | filterSubstringComma:v_segment.value"
                                                            ng-click="appendVSegment(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Joining segment(s)</p>
                                        </div>
                                        <div class="col-xs-8 vcenter">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of J segments, start typing to see suggestions..."
                                                       ng-model="j_segment.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in j_segment.autocomplete | filterSubstringComma:j_segment.value"
                                                            ng-click="appendJSegment(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        CDR3
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="<p>Narrow search to a specific CDR3 motif or sequence different by no more than the specified number of mismatches from the query.</p><p>Sequence and pattern filter supports 20 amino acids, X for an unknown amino acid and amino acid groups specified with '[.]'. For example 'CASSL[ASR]PGATNEKLFF' will search for 'CASSLaPGATNEKLFF', 'CASSLsPGATNEKLFF' and 'CASSLrPGATNEKLFF'. By default the search expects full match, which can be disabled by checking the substring checkbox.</p><p>Hamming distance filter expects complete sequence with no wildcards, and user can specify the number of substitutions, insertions and deletions allowed during the search.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Sequence or pattern</p>
                                        </div>
                                        <div class="col-xs-6">
                                            <input class="form-control" type="text" placeholder="Amino acid pattern, e.g. CSAR[DE]GTGNGYTF or CSARDXTGNGYTF." ng-model="cdr3_pattern.value">
                                        </div>
                                        <div class="col-xs-2">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" ng-model="cdr3_pattern.substring">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    substring
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">By hamming distance</p>
                                        </div>
                                        <div class="col-xs-6">
                                            <input class="form-control" type="text" placeholder="Complete amino acid sequence, e.g. CASSLAPGATNEKLFF." ng-model="cdr3_hamming.value">
                                        </div>
                                        <div class="col-xs-3">
                                            Substitutions
                                            <div class="input-group">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="decrementS()" ng-disabled="cdr3_hamming.s<=0"><span class="glyphicon glyphicon-minus"></span></button>
                                            </span>
                                                <input type="text" onkeydown="return false;" class="form-control" style="text-align:center;"
                                                       value="0" ng-model="cdr3_hamming.s">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="incrementS()" ng-disabled="cdr3_hamming.s>=5"><span class="glyphicon glyphicon-plus"></span></button>
                                            </span>
                                            </div>
                                            Insertions
                                            <div class="input-group">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="decrementI()" ng-disabled="cdr3_hamming.i<=0"><span class="glyphicon glyphicon-minus"></span></button>
                                            </span>
                                                <input type="text" onkeydown="return false;" class="form-control" style="text-align:center;"
                                                       value="0" ng-model="cdr3_hamming.i">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="incrementI()" ng-disabled="cdr3_hamming.i>=3"><span class="glyphicon glyphicon-plus"></span></button>
                                            </span>
                                            </div>
                                            Deletions
                                            <div class="input-group">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="decrementD()" ng-disabled="cdr3_hamming.d<=0"><span class="glyphicon glyphicon-minus"></span></button>
                                            </span>
                                                <input type="text" onkeydown="return false;" class="form-control" style="text-align:center;"
                                                       value="0" ng-model="cdr3_hamming.d">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="incrementD()" ng-disabled="cdr3_hamming.d>=3"><span class="glyphicon glyphicon-plus"></span></button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </filters-tcr>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel-group">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <a role="button" data-toggle="collapse" href="#collapse-AG">
                                Antigen
                            </a>
                        </h3>
                    </div>
                    <filters-ag id="collapse-AG" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        Origin

                                        <span data-toggle="tooltip" data-placement="right"
                                              title="</p>List the representative parent species and genes of the antigen.</p><p>Click on the text field to see the list of known species/genes, start typing to narrow the list. Multiple species/genes can be selected by separating them with a comma.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Source species</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of antigen species, start typing to see suggestions..."
                                                       ng-model="ag_species.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in ag_species.autocomplete | filterSubstringComma:ag_species.value"
                                                            ng-click="appendAgSpecies(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Parent gene</p>
                                        </div>
                                        <div class="col-xs-8 vcenter">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of antigen genes, start typing to see suggestions..."
                                                       ng-model="ag_gene.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in ag_gene.autocomplete | filterSubstringComma:ag_gene.value"
                                                            ng-click="appendAgGene(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        Epitope
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="</p>Specify the epitope sequences or sequence pattern.</p><p>In case of searching for a set of sequences click on the text field to the right of 'Sequence(s)', start typing to narrow the list. Multiple sequences can be selected by separating them with a comma.</p><p>Sequence and pattern filter supports 20 amino acids, X for an unknown amino acid and amino acid groups specified with '[.]'. For example 'GILG[FG]VFTL' will search for 'GILGgVFTL' and 'GILGfVFTL'. By default the search expects full match, which can be disabled by checking the substring checkbox.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Sequence(s)</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of epitope sequences, start typing to see suggestions..."
                                                       ng-model="ag_sequence.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in ag_sequence.autocomplete | filterSubstringComma:ag_sequence.value"
                                                            ng-click="appendAgSequence(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Sequence or pattern</p>
                                        </div>
                                        <div class="col-xs-6">
                                            <input class="form-control" type="text" placeholder="Amino acid pattern, e.g. LLFG[FY][AP]VYV or LLFGXXXYV." ng-model="ag_pattern.value">
                                        </div>
                                        <div class="col-xs-2">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" ng-model="ag_pattern.substring">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    substring
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </filters-ag>
                </div>
            </div>
        </div>
        <div class="row">
        </div>
        <div class="col-md-6">
            <div class="panel-group">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <a role="button" data-toggle="collapse" href="#collapse-MHC">
                                MHC
                            </a>
                        </h3>
                    </div>
                    <filters-mhc id="collapse-MHC" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        General
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="<p>Specify MHC class restriction.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Class</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="mhc_class.mhci">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    MHCI
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="mhc_class.mhcii">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    MHCII
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        Haplotype
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="</p>Specify first and second MHC allele filters.</p><p>Click on the text field to see the list of known MHC allele IDs, start typing to narrow the list. Multiple IDs can be selected by separating them with a comma.</p><p>Incomplete queries will be treated as substrings. For example 'HLA-A*02' will match 'HLA-A*02, HLA-A*02, HLA-A*02:01 etc'.</p><p>The second MHC allele is only meaningful for MHC class II and is set to B2M (beta 2 microglobulin) for MHC class I records.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">First chain allele(s)</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of MHC alleles, start typing to see suggestions..."
                                                       ng-model="mhc_a.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in mhc_a.autocomplete | filterSubstringComma:mhc_a.value"
                                                            ng-click="appendMhcA(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Second chain allele(s)</p>
                                        </div>
                                        <div class="col-xs-8 vcenter">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of MHC alleles, start typing to see suggestions..."
                                                       ng-model="mhc_b.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in mhc_b.autocomplete | filterSubstringComma:mhc_b.value"
                                                            ng-click="appendMhcB(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </filters-mhc>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel-group">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <a role="button" data-toggle="collapse" href="#collapse-META">
                                Metadata
                            </a>
                        </h3>
                    </div>
                    <filters-meta id="collapse-META" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        General
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="<p>Publication ID and assay type filtering.</p><p>Specify the list of Pubmed IDs to search for: click on the text field to see the list of known IDs, start typing to narrow the list. Multiple IDs can be selected by separating them with a comma.</p><p>Assay types and sequencing methods can be selected by using corresponding checkboxes, for more information see VDJdb specification.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Pubmed ID(s)</p>
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="select_drop">
                                                <input class="form-control" type="text"
                                                       placeholder="Comma separated list of Pubmed IDs, start typing to see suggestions..."
                                                       ng-model="pm_ids.value">
                                                <div class="select_drop_container select_drop_container_active">
                                                    <ul>
                                                        <li ng-repeat="value in pm_ids.autocomplete | filterSubstringComma:pm_ids.value"
                                                            ng-click="appendPmId(value)">{{ ::value }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-2">
                                            <p class="vcenter">Assay type</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.methodSort">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Multimer sorting
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.methodCulture">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Culture-based
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.methodOther">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Other
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-xs-2">
                                            <p class="vcenter">Sequencing</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.seqSanger">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Sanger
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.seqAmplicon">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    High-throughput
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" checked
                                                           ng-model="meta_tags.seqSingleCell">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Single-cell
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        Record reliability
                                        <span data-toggle="tooltip" data-placement="right"
                                              title="<p>Filter records based on VDJdb confidence score: the higher the better, defined according to assay metadata, more details can be found in VDJdb specification.<p></p>Check the corresponding box to include non-canonical CDR3 sequences, i.e. those that do not start with a conserved Cys and end with a conserved Phe/Trp, or CDR3 sequences for which our dedicated algorithm was not unable to fix missing V/J segments or map them.</p>"
                                              class="glyphicon glyphicon-question-sign">
                                    </span>
                                    </h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <p class="vcenter">Minimal confidence score</p>
                                        </div>
                                        <div class="col-xs-3">
                                            <div class="input-group">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="decrementScore()" ng-disabled="min_conf_score.value<=0"><span class="glyphicon glyphicon-minus"></span></button>
                                            </span>
                                                <input type="text" onkeydown="return false;" class="form-control" style="text-align:center;"
                                                       value="0" ng-model="min_conf_score.value">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="incrementScore()" ng-disabled="min_conf_score.value>=3"><span class="glyphicon glyphicon-plus"></span></button>
                                            </span>
                                            </div>
                                        </div>
                                        <div class="col-xs-2">
                                            <p class="vcenter">Spurious CDR3</p>
                                        </div>
                                        <div class="col-xs-3">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" ng-model="meta_tags.nonCanonical">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Include non-canonical
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" value="" ng-model="meta_tags.unmapped">
                                                    <span class="cr"><i
                                                            class="cr-icon glyphicon glyphicon-ok"></i></span>
                                                    Incl. unmapped V/J
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </filters-meta>
                </div>
            </div>
        </div>
    </div>
</filters-v2>